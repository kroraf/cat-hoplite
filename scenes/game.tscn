[gd_scene load_steps=17 format=3 uid="uid://5iieinnysufo"]

[ext_resource type="Script" uid="uid://bu1qupn4eegvq" path="res://scripts/game.gd" id="1_lnu2h"]
[ext_resource type="Texture2D" uid="uid://dr51i5n6ce0a0" path="res://resources/Tile/TilesetHighlight.png" id="2_p57ef"]
[ext_resource type="Script" uid="uid://o3l0y6mjbi35" path="res://scripts/overlay.gd" id="7_rysoc"]
[ext_resource type="PackedScene" uid="uid://c41bfw5lpie3k" path="res://scenes/unit_manager.tscn" id="7_vtaks"]
[ext_resource type="PackedScene" uid="uid://jc8gtx6jittt" path="res://scenes/cursor.tscn" id="8_gee14"]
[ext_resource type="Texture2D" uid="uid://dg8l5rw3o2h6r" path="res://resources/UI/FreeHorrorUi.png" id="11_dinhu"]
[ext_resource type="PackedScene" uid="uid://dtoqcxpl6k1g5" path="res://scenes/ui/menu.tscn" id="11_ir15t"]
[ext_resource type="PackedScene" uid="uid://deoacneqlhr7m" path="res://scenes/camera.tscn" id="11_kvpfn"]
[ext_resource type="Script" uid="uid://dee7fmuvou3dt" path="res://scripts/ui_controller.gd" id="11_kvuet"]
[ext_resource type="Theme" uid="uid://dftu4hp0svl4l" path="res://resources/UI/ui_theme.tres" id="11_trtic"]
[ext_resource type="PackedScene" uid="uid://c5xuppkvwcoie" path="res://scenes/slash_effect.tscn" id="12_dinhu"]
[ext_resource type="Script" uid="uid://fg0yp07pbr36" path="res://scripts/health_container.gd" id="12_kvuet"]
[ext_resource type="PackedScene" uid="uid://blhusknicdo6u" path="res://scenes/level_manager.tscn" id="18_ssvqc"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ssvqc"]
texture = ExtResource("2_p57ef")
texture_region_size = Vector2i(32, 39)
0:0/0 = 0
1:0/0 = 0
0:1/0 = 0
1:1/0 = 0

[sub_resource type="TileSet" id="TileSet_264po"]
tile_shape = 3
tile_layout = 5
tile_size = Vector2i(32, 22)
sources/0 = SubResource("TileSetAtlasSource_ssvqc")

[sub_resource type="AtlasTexture" id="AtlasTexture_kvuet"]
atlas = ExtResource("11_dinhu")
region = Rect2(136, 104, 16, 16)

[node name="Game" type="Node2D"]
script = ExtResource("1_lnu2h")

[node name="LevelManager" parent="." instance=ExtResource("18_ssvqc")]

[node name="UnitManager" parent="." instance=ExtResource("7_vtaks")]
unique_name_in_owner = true

[node name="Overlay" type="Node2D" parent="."]
script = ExtResource("7_rysoc")

[node name="MovementLayer" type="TileMapLayer" parent="Overlay"]
z_index = -1
tile_set = SubResource("TileSet_264po")

[node name="InteractionLayer" type="TileMapLayer" parent="Overlay"]
z_index = -1
tile_set = SubResource("TileSet_264po")

[node name="AttackLayer" type="TileMapLayer" parent="Overlay"]
z_index = -1
tile_set = SubResource("TileSet_264po")

[node name="Cursor" parent="." instance=ExtResource("8_gee14")]

[node name="UI" type="CanvasLayer" parent="."]
script = ExtResource("11_kvuet")

[node name="HealthContainer" type="HBoxContainer" parent="UI"]
offset_left = 12.0
offset_top = 203.0
offset_right = 96.0
offset_bottom = 228.0
script = ExtResource("12_kvuet")
full_heart_texture = SubResource("AtlasTexture_kvuet")

[node name="TurnLabel" type="Label" parent="UI"]
offset_left = 250.0
offset_top = 4.0
offset_right = 290.0
offset_bottom = 27.0
text = "turn"

[node name="AttackButton" type="Button" parent="UI"]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -58.0
offset_top = -31.0
grow_horizontal = 0
grow_vertical = 0
theme = ExtResource("11_trtic")
disabled = true
text = "Attack"

[node name="Menu" parent="UI" instance=ExtResource("11_ir15t")]
visible = false

[node name="XYLabel" type="Label" parent="UI"]
offset_left = 132.0
offset_top = 6.0
offset_right = 172.0
offset_bottom = 26.0

[node name="MenuButton" type="Button" parent="UI"]
visible = false
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -42.0
offset_bottom = 34.0
grow_horizontal = 0
size_flags_vertical = 8
theme = ExtResource("11_trtic")
text = "MENU"

[node name="Camera" parent="." instance=ExtResource("11_kvpfn")]
position = Vector2(127, 271)
follow_speed = 3.0

[node name="SlashEffect" parent="." instance=ExtResource("12_dinhu")]

[connection signal="pressed" from="UI/AttackButton" to="." method="_on_attack_button_pressed"]
